#!/bin/bash 

# Find files excluding dotfiles optional matching several strings

if [[ $abs ]] ; then
    abs=$(abs)
fi

find -H $abs* -mount \
    -type f \
    | perl -ne 'print if ! m#/\.#' \
    | perl -ne 'print if ! m#(^|/)node_modules/#' \
    | perl -ne 'print if ! m#(^|/)bower_components/#' \
    | perl -ne 'print if ! m#(^|/)classes/#' \
    | grep-and -e $@

